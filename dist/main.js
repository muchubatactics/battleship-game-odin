(()=>{var e={426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(81),o=n.n(r),a=n(645),i=n.n(a)()(o());i.push([e.id,"body {\n  margin-top: 50px;\n  font-family: sans-serif;\n  display: flex;\n  justify-content: center;\n}\n\n.body-wrap {\n  max-width: 1000px;\n}\n\n.container {\n  display: flex;\n  justify-content: space-around;\n}\n\n.gridwrap {\n  display: grid;\n  grid-template-rows: repeat(12, 35px);\n  grid-template-columns: repeat(11, 35px);\n}\n\n.gridwrap.onxx {\n  margin-right: 70px;\n}\n\n.gridwrap .nums {\n  grid-area: 2 / 1 / 11 / 2;\n  display: grid;\n  grid-template-rows: repeat(10, 35px);\n  align-items: center;\n  justify-items: center;\n  font-size: 10px;\n}\n\n.gridwrap .alphs {\n  grid-area: 1 / 2 / 2 / 12;\n  display: grid;\n  grid-template-columns: repeat(10, 35px);\n  align-items: center;\n  justify-items: center;\n  font-size: 10px;\n}\n\n.gridwrap .gridlabel {\n  grid-area: 12 / 1 / 13 / 12;\n  align-self: end;\n  justify-self: center;\n}\n\n.grid1 > div, .grid2 > div {\n  border-right: 1px solid rgba(0, 0, 255, 0.4);\n  border-top: 1px solid rgba(0, 0, 255, 0.4);\n  position: relative;\n  z-index: 1;\n}\n\n.grid1, .grid2 {\n  grid-area: 2 / 2 / 12 / 12;\n  display: grid;\n  grid-template-rows: repeat(10, 35px);\n  grid-template-columns: repeat(10, 35px);\n  border-left: 1px solid rgba(0, 0, 255, 0.4);\n  border-bottom: 1px solid rgba(0, 0, 255, 0.4);\n  position: relative;\n}\n\n.btns {\n  margin-top: 25px;\n}\n\n.contents {\n  height: 200px;\n  width: 200px;\n  display: flex;\n  justify-content: left;\n  /* align-items: end; */\n  flex-wrap: wrap;\n  margin-top: 35px;\n}\n\n.boat {\n  border: 2px solid blue;\n  background-color: rgba(0, 0, 255, 0.1);\n  height: 33px;\n  cursor: move;\n  left: 0;\n  top: 0;\n  position: absolute;\n  margin: -2px;\n  z-index: 5;\n}\n\n.five {\n  width: 174px;\n}\n\n.four {\n  width: 139px;\n}\n\n.three {\n  width: 104px;\n}\n\n.two {\n  width: 69px;\n}\n\n.spot {\n  margin: 10px;\n  position: relative;\n  height: 33px;\n  border: 1px dotted grey;\n  background-color: white;\n}\n\n.hide {\n  opacity: 0;\n}\n\n@keyframes failed {\n  0% {\n    transform: translateX(0px);\n  }\n\n  25% {\n    transform: translateX(-5px);\n  }\n\n  75% {\n    transform: translateX(5px);\n  }\n\n  100% {\n    transform: translateX(0px);\n  }\n\n}\n\n.boat.animate {\n  border: 2px solid red;\n  background-color: rgba(255, 213, 158, 0.678);\n  animation: failed 0.2s ease-in 0s 1;\n}\n\n.disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n\n.nodrag {\n  cursor: pointer;\n  user-select: none;\n  pointer-events: none;\n}\n\n.correcthit .st, .correcthit .nd {\n  background-color: red;\n  width: 49px;\n  height: 1px;\n  position: absolute;\n  z-index: -1;\n}\n\n.correcthit .st {\n  transform-origin: top left;\n  transform: translate(0px) translateY(-1px) rotate(45deg);\n}\n\n\n.correcthit .nd {\n  transform-origin: top right;\n  transform: translate(-15px) translateY(-1px) rotate(-45deg);\n}\n\n.wronghit {\n  background-color: rgb(243, 243, 243);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.autosolve {\n  background-color: rgb(243, 243, 243);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.blackdot {\n  background-color: black;\n  border-radius: 2px;\n  height: 3px;\n  width: 3px;\n}\n\n.autosolve .blackdot {\n  background-color: rgb(170, 170, 170);\n\n}\n\n.ownhit {\n  border: 2px solid red;\n  background-color: rgba(255, 0, 0, 0.1);\n}\n\n.grid2boat {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: -2px;\n  border: 2px solid red;\n  background-color: rgba(255, 0, 0, 0.1);\n}\n\n/* .grid2overlay {\n  position: absolute;\n} */\n\n.showprogress {\n  display: flex;\n  flex-wrap: wrap;\n  max-width: 70px;\n  max-height: 90px;\n  opacity: 0.3;\n  margin-top: 35px;\n}\n\n.showprogress.two {\n  margin-left: 15px;\n}\n\n.showprogress > div {\n  display: flex;\n  margin: 3px;\n}\n\n.showprogress > div > div {\n  background-color: blue;\n  border: 1px solid white;\n  height: 10px;\n  width: 10px;\n}\n\n.header {\n  display: grid;\n  grid-template-columns: 1fr 2fr 1fr;\n  margin-bottom: 15px;\n}\n\n.header .actual {\n  font-size: 25px;\n  font-weight: 800;\n}\n\n.header .me {\n  color: grey;\n  padding-left: 50px;\n  font-size: 15px;\n  margin-top: -5px;\n}\n\n.header .notifications {\n  background-color: rgb(238, 238, 238);\n  padding: 8px;\n}\n\n.header .other {\n  justify-self: end;\n  color: blue;\n  opacity: 0.5;\n}\n\n.footer .dash {\n  margin-top: 10px;\n  margin-bottom: 5px;\n  width: 100%;\n  border-top: 1px dashed grey;\n}\n\n.footer .jazz {\n  width: 100%;\n  text-align: center;\n  color: grey;\n  font-size: 15px;\n}\n\n.btns {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.btns > button {\n  border: 0px;\n  background-color: transparent;\n  color: rgba(0, 0, 255, 0.644);\n  border-bottom: 1px dashed;\n  margin: 5px;\n}\n\nbutton[disabled='true'] {\n  opacity: 0.3;\n}\n\nbutton:hover {\n  color: green;\n  cursor: pointer;\n}\n\n.showsunk {\n  background-color: red;\n}\n\n.rematch {\n  border: 0px;\n  border-bottom: 2px dashed;\n  color: white;\n  font-size: 15px;\n  margin-left: 50px;\n  background-color: transparent;\n}\n\n.rematch:hover {\n  color: black;\n}\n",""]);const l=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(i[d]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],l=0;l<e.length;l++){var d=e[l],s=r.base?d[0]+r.base:d[0],u=a[s]||0,c="".concat(s," ").concat(u);a[s]=u+1;var p=n(c),f={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=o(f,r);r.byIndex=l,t.splice(l,0,{identifier:c,updater:h,references:1})}i.push(c)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var l=n(a[i]);t[l].references--}for(var d=r(e,o),s=0;s<a.length;s++){var u=n(a[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=d}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},794:(e,t,n)=>{const r=n(21),o=n(507);e.exports=function(){const e=o();let t=null;function n(e){return e.x>=0&&e.x<10&&e.y>=0&&e.y<10}return e.isValid=n,e.ai=function(o){if(t&&!o.getGameboard().getBoard()[t.found.start.y][t.found.start.x].ship.isSunk()){let r;if(t.found.next){if(r=t.found.next,console.log("before new code: xy: ",r),(!n(r)||o.getGameboard().getBoard()[r.y][r.x].isHit)&&t.found.streak){if(console.log("In new code"),"h"==t.found.orient)if("+"==t.found.currop){let e=0;for(;(!n(r)||o.getGameboard().getBoard()[r.y][r.x].isHit)&&e<20;)r={x:r.x-1,y:r.y},e++;e<20||console.log("VERY MAJOR ERROR"),t.found.currop="-"}else{let e=0;for(;(!n(r)||o.getGameboard().getBoard()[r.y][r.x].isHit)&&e<20;)r={x:r.x+1,y:r.y},e++;e<20||console.log("VERY MAJOR ERROR"),t.found.currop="+"}else if("+"==t.found.currop){let e=0;for(;(!n(r)||o.getGameboard().getBoard()[r.y][r.x].isHit)&&e<20;)r={x:r.x,y:r.y-1},e++;e<20||console.log("VERY MAJOR ERROR"),t.found.currop="-"}else{let e=0;for(;(!n(r)||o.getGameboard().getBoard()[r.y][r.x].isHit)&&e<20;)r={x:r.x,y:r.y+1},e++;e<20||console.log("VERY MAJOR ERROR"),t.found.currop="+"}console.log("result of new code :",r)}t.found.streak?"+"==t.found.currop?t.found.next="h"==t.found.orient?{x:r.x+1,y:r.y}:{x:r.x,y:r.y+1}:t.found.next="h"==t.found.orient?{x:r.x-1,y:r.y}:{x:r.x,y:r.y-1}:"+"==t.found.currop?(t.found.next="h"==t.found.orient?{x:t.found.start.x-1,y:t.found.start.y}:{x:t.found.start.x,y:t.found.start.y-1},t.found.currop="-",r=t.found.next,t.found.next="h"==t.found.orient?{x:r.x-1,y:r.y}:{x:r.x,y:r.y-1}):(t.found.next="h"==t.found.orient?{x:t.found.start.x+1,y:t.found.start.y}:{x:t.found.start.x,y:t.found.start.y+1},t.found.currop="+",r=t.found.next,t.found.next="h"==t.found.orient?{x:r.x+1,y:r.y}:{x:r.x,y:r.y+1}),o.getGameboard().getBoard()[r.y][r.x].ship?t.found.streak=!0:t.found.streak=!1}else{let n;if(t.top?(t.found.next=t.top,n="t"):t.right?(t.found.next=t.right,n="r"):t.bottom?(t.found.next=t.bottom,n="b"):(t.found.next=t.left,n="l"),r=t.found.next,o.getGameboard().getBoard()[r.y][r.x].ship){t.found.currop="t"==n||"l"==n?"-":"+",t.found.streak=!0;let{horizontal:o,length:a}=e.getGameboard().getLenAndDirection(t.found.start,t.found.next);t.found.orient=o?"h":"v",t.found.next=o?"+"==t.found.currop?{x:r.x+1,y:r.y}:{x:r.x-1,y:r.y}:"+"==t.found.currop?{x:r.x,y:r.y+1}:{x:r.x,y:r.y-1}}else t.found.next=null,"t"==n&&(t.top=null),"r"==n&&(t.right=null),"b"==n&&(t.bottom=null),"l"==n&&(t.left=null);console.log("trying to find first next: ",JSON.stringify(t))}return r}{t=null;let e=Math.floor(100*Math.random()),a=r.numToXY(e);for(;o.getGameboard().getBoard()[a.y][a.x].isHit;)e=Math.floor(100*Math.random()),a=r.numToXY(e);if(o.getGameboard().getBoard()[a.y][a.x].ship){let e={x:a.x,y:a.y-1};n(e)?o.getGameboard().getBoard()[e.y][e.x].isHit&&(e=null):e=null;let r={x:a.x-1,y:a.y};n(r)?o.getGameboard().getBoard()[r.y][r.x].isHit&&(r=null):r=null;let i={x:a.x+1,y:a.y};n(i)?o.getGameboard().getBoard()[i.y][i.x].isHit&&(i=null):i=null;let l={x:a.x,y:a.y+1};n(l)?o.getGameboard().getBoard()[l.y][l.x].isHit&&(l=null):l=null;let d={xy:a,top:e,left:r,right:i,bottom:l,found:{}};d.found.start=a,d.found.next=null,t=d}return console.log("Just found: ",JSON.stringify(t)),a}},e.attack=function(e,t){return e.getGameboard().receiveAttack(t.x,t.y)},e.printBoard=function(){let e="";for(let t=0;t<10;t++){let n="";for(let e=0;e<10;e++)this.getGameboard().getBoard()[t][e].ship?n+="X ":n+="O ";e+=n,e+="\n"}console.log(e)},e}},498:(e,t,n)=>{const r=n(643),o=n(21);e.exports=function(){let e=[[],[],[],[],[],[],[],[],[],[]];for(let t=0;t<10;t++)for(let n=0;n<10;n++)e[t].push({x:n,y:t,isHit:!1,ship:null});function t(e,t){let n=e.x!=t.x;return{horizontal:n,length:1+(n?t.x-e.x:t.y-e.y)}}return{getLenAndDirection:t,placeShip:function(n,o){let{horizontal:a,length:i}=t(n,o),l=r(i);if(a)for(let t=n.x;t<=o.x;t++){if(e[n.y][t].ship)throw new Error("ship already exists");e[n.y][t].ship=l}else for(let t=n.y;t<=o.y;t++){if(e[t][n.x].ship)throw new Error("ship already exists");e[t][n.x].ship=l}},getBoard:function(){return e},receiveAttack:function(t,n){return e[n][t].isHit=!0,!!e[n][t].ship&&(e[n][t].ship.hit(),!0)},allShipsSunk:function(){for(let t=0;t<10;t++)for(let n=0;n<10;n++)if(e[t][n].ship&&!e[t][n].ship.sunk)return!1;return!0},validPlacement:function(n,r){if(n.x>9||n.y>9||r.x>9||r.y>9)return!1;if(n.x<0||n.y<0||r.x<0||r.y<0)return!1;let{horizontal:o,length:a}=t(n,r);if(o){for(let t=n.x-1;t<=r.x+1;t++)if(!(t<0||t>9)){if(e[n.y][t].ship)return!1;if(n.y-1>=0&&e[n.y-1][t].ship)return!1;if(n.y+1<=9&&e[n.y+1][t].ship)return!1}}else for(let t=n.y-1;t<=r.y+1;t++)if(!(t<0||t>9)){if(e[t][n.x].ship)return!1;if(n.x-1>=0&&e[t][n.x-1].ship)return!1;if(n.x+1<=9&&e[t][n.x+1].ship)return!1}return!0},removeShip:function(n,r){let{horizontal:o,length:a}=t(n,r);if(o)for(let t=n.x;t<=r.x;t++)e[n.y][t].ship=null;else for(let t=n.y;t<=r.y;t++)e[t][n.x].ship=null},printBoard:function(){let e="";for(let t=0;t<10;t++){let n="";for(let e=0;e<10;e++)this.getBoard()[t][e].ship?n+="X ":n+="O ";e+=n,e+="\n"}console.log(e)},removeAllShips:function(){for(let t=0;t<10;t++)for(let n=0;n<10;n++)e[t][n].ship=null,e[t][n].isHit=!1},getShipFromNum:function(t){let n=o.numToXY(t);return e[n.y][n.x].ship}}}},21:e=>{const t=function(){function e(e,t){return 10*t+e}return{numToXY:function(e){return{x:(e=Number(e))%10,y:Math.floor(e/10)}},unshadeArea:function(t,n){if(t.x==n.x)for(let r=0;r<n.y-t.y+1;r++)document.querySelector(`.grid1 [data-val='${e(t.x,t.y+r)}']`).style.cssText="";else for(let r=0;r<n.x-t.x+1;r++)document.querySelector(`.grid1 [data-val='${e(t.x+r,t.y)}']`).style.cssText=""},xyToNum:e,getEnd:function(e,t,n){let r={};return n=Number(n),"h"==t?(r.x=e.x+n-1,r.y=e.y):(r.y=e.y+n-1,r.x=e.x),r},shadeArea:function(t,n){if(t.x==n.x)for(let r=0;r<n.y-t.y+1;r++){let o=document.querySelector(`.grid1 [data-val='${e(t.x,t.y+r)}']`);o.style.cssText="\n        border-left: 2px solid yellowgreen;\n        border-right: 2px solid yellowgreen;\n        opacity: 1;\n        ",0==r&&(o.style.cssText+="\n          border-top: 2px solid yellowgreen;\n          "),r==n.x-t.x&&(o.style.cssText+="\n          border-bottom: 2px solid yellowgreen;\n          ")}else for(let r=0;r<n.x-t.x+1;r++){let o=document.querySelector(`.grid1 [data-val='${e(t.x+r,t.y)}']`);o.style.cssText="\n        border-top: 2px solid yellowgreen;\n        border-bottom: 2px solid yellowgreen;\n        opacity: 1;\n        ",0==r&&(o.style.cssText+="\n          border-left: 2px solid yellowgreen;\n          "),r==n.x-t.x&&(o.style.cssText+="\n          border-right: 2px solid yellowgreen;\n          ")}}}}();e.exports=t},507:(e,t,n)=>{const r=n(498);e.exports=function(){const e=r();function t(){return e}function n(t,n){e.placeShip(t,n)}return{attack:function(e,t){return e.getGameboard().receiveAttack(t.x,t.y)},getGameboard:t,lossCondition:function(){return t().allShipsSunk()},putShipOnGameBoard:n,randomlyPlaceShips:function(){const e=[5,4,3,3,2];let r,o={x:null,y:null},a={x:null,y:null};for(let i=0;i<e.length;i++){for(r=10*Math.random();;){if(o.x=Math.floor(10*Math.random()),o.y=Math.floor(10*Math.random()),r<5){if(a.x=o.x+e[i]-1,a.x>9)continue;a.y=o.y}else{if(a.y=o.y+e[i]-1,a.y>9)continue;a.x=o.x}if(t().validPlacement(o,a))break}n(o,a)}}}}},643:e=>{e.exports=function(e){return{length:e,hits:null,sunk:!1,hit:function(){this.sunk||(this.hits?this.hits++:this.hits=1,this.isSunk())},isSunk:function(){return this.hits==this.length&&(this.sunk=!0,!0)}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(379),t=n.n(e),r=n(795),o=n.n(r),a=n(569),i=n.n(a),l=n(565),d=n.n(l),s=n(216),u=n.n(s),c=n(589),p=n.n(c),f=n(426),h={};h.styleTagTransform=p(),h.setAttributes=d(),h.insert=i().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=u(),t()(f.Z,h),f.Z&&f.Z.locals&&f.Z.locals;const g=n(21),x=n(794),y=n(507),m=x(),b=y();let v=document.querySelectorAll(".boat"),S=document.querySelectorAll(".grid1 > div"),w=document.querySelector(".grid2"),E=document.querySelector(".grid1"),A=!1;const k=document.querySelectorAll(".spot"),q=document.querySelector(".reset"),L=document.querySelector(".randomise"),N=document.querySelector(".play"),T=document.querySelector(".header .notifications");function G(e){this.style.opacity="0.2",this.classList.add("temp"),"1"==this.getAttribute("data-placed")&&b.getGameboard().removeShip(g.numToXY(this.parentElement.getAttribute("data-val")),g.getEnd(g.numToXY(this.parentElement.getAttribute("data-val")),this.getAttribute("data-orient"),this.getAttribute("data-length")))}function $(e){if(this.style.opacity="1",this.classList.remove("temp"),!this.parentElement.classList.contains("spot")){let e=Number(this.parentElement.getAttribute("data-val"));b.getGameboard().placeShip(g.numToXY(e),g.getEnd(g.numToXY(e),this.getAttribute("data-orient"),this.getAttribute("data-length"))),this.setAttribute("data-placed","1")}S.forEach((e=>{e.classList.remove("over"),e.style.cssText=""}));let t=0;k.forEach((e=>{e.children.length>0&&t++})),t||setTimeout((()=>{N.removeAttribute("disabled"),document.querySelector(".contents").style.display="none"}),500)}function C(e){let t=document.querySelector(".temp"),n=Number(t.getAttribute("data-length")),r=t.getAttribute("data-orient"),o=Number(this.getAttribute("data-val")),a=g.numToXY(o),i=g.getEnd(a,r,n);b.getGameboard().validPlacement(a,i)?(g.shadeArea(a,i),A=!0):A=!1}function B(e){let t=document.querySelector(".temp"),n=Number(t.getAttribute("data-length")),r=t.getAttribute("data-orient"),o=Number(this.getAttribute("data-val")),a=g.numToXY(o),i=g.getEnd(a,r,n);g.unshadeArea(a,i)}function M(e){if(A)return e.preventDefault(),!1}function Y(e){if(!A)return;let t=document.querySelector(".temp");return e.preventDefault(),e.stopPropagation(),this.appendChild(t),"0"==t.getAttribute("data-placed")&&t.addEventListener("click",R),!1}function R(e){e.stopPropagation();let t=!1,n=this.getAttribute("data-orient"),r=Number(this.getAttribute("data-length")),o=Number(this.parentElement.getAttribute("data-val")),a=g.numToXY(o);b.getGameboard().removeShip(a,g.getEnd(a,n,r));let i={};if("h"==n?(i.y=a.y+r-1,i.x=a.x,b.getGameboard().validPlacement(a,i)?t=!0:b.getGameboard().placeShip(a,g.getEnd(a,n,r))):(i.x=a.x+r-1,i.y=a.y,b.getGameboard().validPlacement(a,i)?t=!0:b.getGameboard().placeShip(a,g.getEnd(a,n,r))),t){let e=this.getAttribute("data-h"),t=this.getAttribute("data-w");this.style.height=t+"px",this.setAttribute("data-h",t),this.style.width=e+"px",this.setAttribute("data-w",e),"h"==n?this.setAttribute("data-orient","v"):this.setAttribute("data-orient","h"),b.getGameboard().placeShip(a,i)}else this.classList.add("animate"),setTimeout((()=>{this.classList.remove("animate")}),200)}function X(){b.getGameboard().removeAllShips();let e,t=["two","three","three","four","five"];for(let n=0;n<5;n++){if(2!=n){if(e=document.querySelector(`.boat.${t[n]}`),e.parentElement.classList.contains("spot"))continue;document.querySelector(`.spot.${t[n]}`).appendChild(e)}else{if(e=document.querySelector('.boat.three[data-placed="1"]'),!e)continue;if(e.parentElement.classList.contains("spot"))continue;let t=document.querySelector(".spot.three .boat");document.querySelectorAll(".spot.three").forEach((n=>{n!==t&&n.appendChild(e)}))}e.setAttribute("data-placed","0"),e.setAttribute("data-orient","h");let r=Number(e.getAttribute("data-w")),o=Number(e.getAttribute("data-h")),a=r;r=r>o?r:o,o=a==r?o:a,e.setAttribute("data-w",r),e.setAttribute("data-h",o),e.style.height=o+"px",e.style.width=r+"px",e.removeEventListener("click",R)}}function O(e){e.classList.add("disabled")}function z(e){e.classList.remove("disabled")}function H(){X(),b.randomlyPlaceShips(),function(){for(let e=0;e<10;e++)for(let t=0;t<10;t++)if(b.getGameboard().getBoard()[e][t].ship){if(0!=e&&b.getGameboard().getBoard()[e-1][t].ship)continue;if(0!=t&&b.getGameboard().getBoard()[e][t-1].ship)continue;let n,r=b.getGameboard().getBoard()[e][t].ship.length;n=9!=t&&b.getGameboard().getBoard()[e][t+1].ship?"h":"v";let o,a=g.xyToNum(t,e),i=["zero","one","two","three","four","five"];if(o=3!=r?document.querySelector(`.boat.${i[r]}`):document.querySelector('.boat.three[data-placed="0"]'),"v"==n){let e=o.getAttribute("data-h"),t=o.getAttribute("data-w");o.style.height=t+"px",o.setAttribute("data-h",t),o.style.width=e+"px",o.setAttribute("data-w",e),o.setAttribute("data-orient","v")}document.querySelector(`.grid1 [data-val="${a}"]`).appendChild(o),o.setAttribute("data-placed","1"),o.addEventListener("click",R)}}(),document.querySelector(".contents").style.display="none",N.removeAttribute("disabled")}function P(){let e=Number(this.getAttribute("data-val"));if(this.removeEventListener("click",P),b.attack(m,g.numToXY(e))){const t=document.createElement("div");t.classList.add("st");const n=document.createElement("div");n.classList.add("nd"),this.classList.add("correcthit"),this.appendChild(t),this.appendChild(n),D(e,w,b,m);let r=m.getGameboard().getShipFromNum(e);if(r.isSunk()){j(m,r,e);let t=document.querySelector(`.showprogress.two .rep${r.length}[data-sunk='false']`);t.querySelectorAll("div").forEach((e=>{e.style.backgroundColor="red"})),t.setAttribute("data-sunk","true"),m.lossCondition()&&I(m)}}else{const e=document.createElement("div");e.classList.add("blackdot"),z(E),O(w),this.classList.add("wronghit"),this.appendChild(e);let t=m.ai(b);console.log("computer ai returns: ",t),b.getGameboard().getBoard()[t.y][t.x].isHit&&console.log("IMPOSSIBLE");let n=document.querySelector(`.grid1 [data-val='${g.xyToNum(t.x,t.y)}']`);setTimeout((()=>{J(t,n),z(w),O(E)}),1e3)}}function j(e,t,n){n=Number(n);let r,o,a,i=t.length;if(e==m){let e,t,l,d,s=F(n);s.before&&(e=document.querySelector(`.grid2 [data-val='${s.before}']`)),s.after&&(t=document.querySelector(`.grid2 [data-val='${s.after}']`)),e&&(l=e.childNodes.length>1),t&&(d=t.childNodes.length>1),r=l||d?"h":"v",o=n;let u=n,c=document.querySelector(`.grid2 [data-val='${u}']`);if("h"==r){for(;c&&c.childNodes.length>1;)u-=1,o=u,c=document.querySelector(`.grid2 [data-val='${u}']`);for(o++;!V(n,o);)o++;a=o+i-1}else{for(;c&&c.childNodes.length>1;)u-=10,o=u,c=document.querySelector(`.grid2 [data-val='${u}']`);o+=10,a=o+10*(i-1)}let p,f=document.createElement("div");switch(f.classList.add("grid2boat"),i){case 2:p=69;break;case 3:p=104;break;case 4:p=139;break;case 5:p=174}"h"==r?(f.style.height="33px",f.style.width=`${p}px`):(f.style.width="33px",f.style.height=`${p}px`),document.querySelector(`.grid2 [data-val='${o}']`).appendChild(f)}else{let e,t,a,i,l=F(n);l.before&&(e=document.querySelector(`.grid1 [data-val='${l.before}']`)),l.after&&(t=document.querySelector(`.grid1 [data-val='${l.after}']`)),e&&(a=e.childNodes.length>1),t&&(i=t.childNodes.length>1),r=a||i?"h":"v",o=n;let d=n,s=document.querySelector(`.grid1 [data-val='${d}']`);if("h"==r){for(;s&&s.childNodes.length>1;)d-=1,o=d,s=document.querySelector(`.grid1 [data-val='${d}']`);for(o++;!V(n,o);)o++}else{for(;s&&s.childNodes.length>1;)d-=10,o=d,s=document.querySelector(`.grid1 [data-val='${d}']`);o+=10}document.querySelector(`.grid1 [data-val='${o}']`).childNodes[0].classList.add("ownhit")}}function I(e){document.querySelectorAll(".grid2 > div").forEach((e=>{e.removeEventListener("click",P)})),e==b?(T.style.backgroundColor="red",T.textContent="You lose."):(T.style.backgroundColor="yellowgreen",T.textContent="You win!");let t=document.createElement("button");t.textContent="Play again!",t.classList.add("rematch"),t.addEventListener("click",(()=>{window.location.reload()})),T.appendChild(t)}function J(e,t){if(m.attack(b,e)){const n=document.createElement("div");n.classList.add("st");const r=document.createElement("div");r.classList.add("nd"),t.classList.add("correcthit"),t.appendChild(n),t.appendChild(r),D(Number(t.getAttribute("data-val")),E,m,b);let o=b.getGameboard().getShipFromNum(g.xyToNum(e.x,e.y));if(o.isSunk()){j(b,o,g.xyToNum(e.x,e.y));let t=document.querySelector(`.showprogress.one .rep${o.length}[data-sunk='false']`);if(t.querySelectorAll("div").forEach((e=>{e.style.backgroundColor="red"})),t.setAttribute("data-sunk","true"),b.lossCondition())return void I(b)}setTimeout((()=>{let e=m.ai(b);return console.log("computer ai returns: ",e),b.getGameboard().getBoard()[e.y][e.x].isHit&&console.log("IMPOSSIBLE"),J(e,document.querySelector(`.grid1 [data-val='${g.xyToNum(e.x,e.y)}']`))}),500)}else{const e=document.createElement("div");e.classList.add("blackdot"),t.classList.add("wronghit"),t.appendChild(e)}}function D(e,t,n,r){let o=g.numToXY(e),a=function(e){let t=[];return t.push({x:e.x-1,y:e.y-1}),t.push({x:e.x-1,y:e.y+1}),t.push({x:e.x+1,y:e.y-1}),t.push({x:e.x+1,y:e.y+1}),t.forEach((e=>{(e.x>9||e.x<0)&&(e.invalid=!0),(e.y>9||e.y<0)&&(e.invalid=!0)})),t.filter((e=>!e.invalid)).map((e=>g.xyToNum(e.x,e.y)))}(o);if(r.getGameboard().getBoard()[o.y][o.x].ship.isSunk()){let t,n,i,l=r.getGameboard().getBoard()[o.y][o.x].ship.length;if(r==m){let r,o,a,d,s=F(e);s.before&&(r=document.querySelector(`.grid2 [data-val='${s.before}']`)),s.after&&(o=document.querySelector(`.grid2 [data-val='${s.after}']`)),r&&(a=r.childNodes.length>1),o&&(d=o.childNodes.length>1),t=a||d?"h":"v",n=e;let u=e,c=document.querySelector(`.grid2 [data-val='${u}']`);if("h"==t){for(;c&&c.childNodes.length>1;)u-=1,n=u,c=document.querySelector(`.grid2 [data-val='${u}']`);i=n+l+1,V(e,n)||(n=null),V(e,i)||(i=null)}else{for(;c&&c.childNodes.length>1;)u-=10,n=u,c=document.querySelector(`.grid2 [data-val='${u}']`);i=n+10*(l-1)+20}}else{let r,o,a,d,s=F(e);s.before&&(r=document.querySelector(`.grid1 [data-val='${s.before}']`)),s.after&&(o=document.querySelector(`.grid1 [data-val='${s.after}']`)),r&&(a=r.childNodes.length>1),o&&(d=o.childNodes.length>1),t=a||d?"h":"v",n=e;let u=e,c=document.querySelector(`.grid1 [data-val='${u}']`);if("h"==t){for(;c&&c.childNodes.length>1;)u-=1,n=u,c=document.querySelector(`.grid1 [data-val='${u}']`);i=n+l+1,V(e,n)||(n=null),V(e,i)||(i=null)}else{for(;c&&c.childNodes.length>1;)u-=10,n=u,c=document.querySelector(`.grid1 [data-val='${u}']`);i=n+10*(l-1)+20}}n&&0<n&&n<100&&a.push(n),i&&0<i&&i<100&&a.push(i)}a.forEach((e=>{let o=t.querySelector(`[data-val='${e}']`);if(o&&0==o.childNodes.length){n.attack(r,g.numToXY(e));const t=document.createElement("div");t.classList.add("blackdot"),o.appendChild(t),o.classList.add("autosolve"),o.removeEventListener("click",P)}}))}function F(e){let t=g.numToXY(e),n={x:t.x-1,y:t.y},r={x:t.x+1,y:t.y};return n.x>=0&&n.x<=9||(n=null),r.x>=0&&r.x<=9||(r=null),n&&(n=g.xyToNum(n.x,n.y)),r&&(r=g.xyToNum(r.x,r.y)),{before:n,after:r}}function V(e,t){return Math.floor(e/10)==Math.floor(t/10)}O(w),v.forEach((e=>{e.addEventListener("dragstart",G),e.addEventListener("dragend",$)})),H(),S.forEach((e=>{e.addEventListener("dragenter",C),e.addEventListener("dragleave",B),e.addEventListener("dragover",M),e.addEventListener("drop",Y)})),L.addEventListener("click",H),q.addEventListener("click",(()=>{document.querySelector(".contents").style.cssText="",N.setAttribute("disabled","true"),X()})),N.addEventListener("click",(()=>{S.forEach((e=>{e.removeEventListener("dragenter",C),e.removeEventListener("dragleave",B),e.removeEventListener("dragover",M),e.removeEventListener("drop",Y)})),v.forEach((e=>{e.removeEventListener("dragstart",G),e.removeEventListener("dragend",$),e.removeEventListener("click",R),e.removeAttribute("draggable")})),q.setAttribute("disabled","true"),L.setAttribute("disabled","true"),N.setAttribute("disabled","true"),z(w),E.classList.add("nodrag"),m.randomlyPlaceShips(),document.querySelectorAll(".grid2 > div").forEach((e=>{e.addEventListener("click",P)})),document.querySelectorAll(".showprogress").forEach((e=>{e.style.cssText=""})),T.textContent="Good luck!"}))})()})();